"use strict";(self.webpackChunkabcjs=self.webpackChunkabcjs||[]).push([[153],{317:(e,a,t)=>{t.r(a),t.d(a,{data:()=>n});const n={key:"v-765a94ec",path:"/visual/click-listener.html",title:"Click Listener",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"abcelem",slug:"abcelem",children:[]},{level:2,title:"tuneNumber",slug:"tunenumber",children:[]},{level:2,title:"classes",slug:"classes",children:[]},{level:2,title:"analysis",slug:"analysis",children:[]},{level:2,title:"drag",slug:"drag",children:[]},{level:2,title:"mouseEvent",slug:"mouseevent",children:[]}],filePathRelative:"visual/click-listener.md",git:{updatedTime:1645660869e3,contributors:[{name:"Paul Rosen",email:"paul@paulrosen.net",commits:9}]}}},2308:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var n=t(6252);const s=(0,n.uE)('<h1 id="click-listener" tabindex="-1"><a class="header-anchor" href="#click-listener" aria-hidden="true">#</a> Click Listener</h1><p>If you want to get information about what the user has clicked on, you can set up a callback function. The callback function looks like this:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">clickListener</span><span class="token punctuation">(</span><span class="token parameter">abcelem<span class="token punctuation">,</span> tuneNumber<span class="token punctuation">,</span> classes<span class="token punctuation">,</span> analysis<span class="token punctuation">,</span> drag<span class="token punctuation">,</span> mouseEvent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n\n<span class="token function">renderAbc</span><span class="token punctuation">(</span><span class="token string">&quot;paper&quot;</span><span class="token punctuation">,</span> abcString<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">clickListener</span><span class="token operator">:</span> clickListener <span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Here is the data that is returned to you:</p><h2 id="abcelem" tabindex="-1"><a class="header-anchor" href="#abcelem" aria-hidden="true">#</a> abcelem</h2><p>The internal object that is associated with the element clicked. Use a debugger to see what is available.</p><div class="custom-container tip"><p class="custom-container-title">Tip</p><p>This object is subject to change as the library gets more functionality. There is not a guarantee that it will stay backwards compatible. But that said, the structure of this object doesn&#39;t change much and usually just adds properties.</p></div><h2 id="tunenumber" tabindex="-1"><a class="header-anchor" href="#tunenumber" aria-hidden="true">#</a> tuneNumber</h2><p>If there are more than one tune in the original abcString, this reports which tune was clicked on.</p><h2 id="classes" tabindex="-1"><a class="header-anchor" href="#classes" aria-hidden="true">#</a> classes</h2><p>The css classes of the element that was clicked. (This requires the parameter <code>{ add_classes: true }</code>).</p><h2 id="analysis" tabindex="-1"><a class="header-anchor" href="#analysis" aria-hidden="true">#</a> analysis</h2><p>An object containing the following info about the item clicked:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{\n   line: 0, // zero-based line\n   measure: 0, // zero-based measure from the beginning of the line\n   voice: 0, // zero-based voice \n   staffPos: { top: 0, height: 0, zero: 0 } // the Y-coordinates in the SVG for the staff system that contains the item. &quot;zero&quot; is the Y-coordinate of the middle-C.\n   name: &quot;&quot;, // The name of the parent item that was clicked.\n   clickedName: &quot;&quot;, // If the item is compound, then this is the name on the part that was clicked.\n   parentClasses: &quot;&quot;, // The classes on the parent item\n   clickedClasses: &quot;&quot;, // The classes on the clicked element\n   selectableElement: HTMLElement, // The parent element that was selected. \n}\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>The svg elements may be wrapped in a <code>&lt;g&gt;</code> because there is more than one element that is contained. For instance, in <code>[Ac]</code> (when L:1/8), there is a <code>&lt;g&gt;</code> that contains an element for a notehead on the <code>A</code> line, a notehead on the <code>c</code> line, a stem, and an eighth note flag. Clicking anywhere on that <code>&lt;g&gt;</code> will cause the name to be &quot;note&quot; but if you click directly on a notehead, the name will still be &quot;note&quot; but the clickedName will be &quot;A&quot; or &quot;c&quot;.</p><h2 id="drag" tabindex="-1"><a class="header-anchor" href="#drag" aria-hidden="true">#</a> drag</h2>',16),i=(0,n.Uk)("See the "),l=(0,n.Uk)("Dragging"),c=(0,n.Uk)(" page for more details."),o=(0,n.uE)('<h2 id="mouseevent" tabindex="-1"><a class="header-anchor" href="#mouseevent" aria-hidden="true">#</a> mouseEvent</h2><p>The original event that triggered this callback.</p><p>Note that it might be more useful to use <code>analysis.selectableElement</code> than to use <code>mouseEvent.target</code>. The latter will be what the mouse actually clicked on, but that might not be what the user was intending because of two cases: If the SVG itself was clicked on, then the closest element will be returned as clicked because otherwise the target can be really narrow. Second, if the element is compound (for instance the dynamic <code>mp</code>) then the user will have clicked on either the <code>m</code> or the <code>p</code> but probably the intent was to select the immediate parent, which is a <code>&lt;g&gt;</code> tag that contains the info on the element.</p>',3),r={},u=(0,t(3744).Z)(r,[["render",function(e,a){const t=(0,n.up)("RouterLink");return(0,n.wg)(),(0,n.iD)(n.HY,null,[s,(0,n._)("p",null,[i,(0,n.Wm)(t,{to:"/visual/dragging.html"},{default:(0,n.w5)((()=>[l])),_:1}),c]),o],64)}]])}}]);